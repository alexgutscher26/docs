# Form Builder Utility

The Form Builder utility is a wrapper around `react-hook-form` and `zod` that provides a simplified API for creating forms with validation in StackForge.

## Overview

The form builder utility standardizes form creation across the application by providing consistent validation, error handling, and submission patterns.

## Installation

The form builder is already included in StackForge. No additional installation is required.

## Usage

### Basic Form

```tsx
'use client';

import { formBuilder } from '@/lib/form-builder';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';

const BasicForm = () => {
  const { register, handleSubmitWithValidation } = formBuilder();
  
  const onSubmit = handleSubmitWithValidation((data) => {
    console.log(data);
  });
  
  return (
    <form onSubmit={onSubmit}>
      <Input {...register('name')} placeholder="Enter your name" />
      <Button type="submit">Submit</Button>
    </form>
  );
};
```

### Form with Zod Validation

```tsx
'use client';

import { z } from 'zod';
import { formBuilder } from '@/lib/form-builder';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';

const schema = z.object({
  email: z.string().email('Invalid email address'),
  password: z.string().min(8, 'Password must be at least 8 characters'),
});

type FormValues = z.infer<typeof schema>;

const ValidatedForm = () => {
  const { 
    register, 
    handleSubmitWithValidation,
    formState: { errors }
  } = formBuilder<FormValues>({
    schema,
    defaultValues: {
      email: '',
      password: '',
    }
  });
  
  const onSubmit = handleSubmitWithValidation((data) => {
    console.log(data);
  });
  
  return (
    <form onSubmit={onSubmit}>
      <div>
        <Input {...register('email')} placeholder="Enter your email" />
        {errors.email && <p>{errors.email.message}</p>}
      </div>
      
      <div>
        <Input 
          {...register('password')} 
          type="password" 
          placeholder="Enter your password" 
        />
        {errors.password && <p>{errors.password.message}</p>}
      </div>
      
      <Button type="submit">Submit</Button>
    </form>
  );
};
```

### Advanced Form with Custom Configuration

```tsx
'use client';

import { z } from 'zod';
import { formBuilder } from '@/lib/form-builder';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';

const schema = z.object({
  firstName: z.string().min(1, 'First name is required'),
  lastName: z.string().min(1, 'Last name is required'),
  email: z.string().email('Invalid email address'),
});

type FormValues = z.infer<typeof schema>;

const AdvancedForm = () => {
  const { 
    register, 
    handleSubmitWithValidation,
    formState: { errors, isSubmitting },
    reset
  } = formBuilder<FormValues>({
    schema,
    defaultValues: {
      firstName: '',
      lastName: '',
      email: '',
    },
    mode: 'onChange', // Validation mode
  });
  
  const onSubmit = handleSubmitWithValidation(async (data) => {
    try {
      // Simulate API call
      await new Promise(resolve => setTimeout(resolve, 1000));
      console.log('Form submitted:', data);
      reset(); // Reset form after successful submission
    } catch (error) {
      console.error('Submission error:', error);
    }
  });
  
  return (
    <form onSubmit={onSubmit}>
      <div>
        <Input {...register('firstName')} placeholder="First name" />
        {errors.firstName && <p>{errors.firstName.message}</p>}
      </div>
      
      <div>
        <Input {...register('lastName')} placeholder="Last name" />
        {errors.lastName && <p>{errors.lastName.message}</p>}
      </div>
      
      <div>
        <Input {...register('email')} placeholder="Email address" />
        {errors.email && <p>{errors.email.message}</p>}
      </div>
      
      <Button type="submit" disabled={isSubmitting}>
        {isSubmitting ? 'Submitting...' : 'Submit'}
      </Button>
    </form>
  );
};
```

## API Reference

### `formBuilder<T>(config)`

Creates a form with the specified configuration.

#### Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `config` | `FormBuilderConfig<T>` | Configuration options for the form |

#### Returns

`FormBuilderReturn<T>` - Enhanced form methods and utilities.

### Configuration Options

| Option | Type | Description |
|--------|------|-------------|
| `schema` | `z.ZodSchema<T>` | Zod schema for form validation |
| `defaultValues` | `Partial<T>` | Default values for form fields |
| `mode` | `UseFormProps['mode']` | Validation mode ('onSubmit', 'onBlur', 'onChange', 'onTouched', 'all') |
| `reValidateMode` | `UseFormProps['reValidateMode']` | Re-validation mode |
| `criteriaMode` | `UseFormProps['criteriaMode']` | Criteria mode for validation |

### Return Values

The form builder returns all methods from `react-hook-form` plus:

| Method | Type | Description |
|--------|------|-------------|
| `handleSubmitWithValidation` | Function | Submit handler with built-in validation |

## Best Practices

1. **Always use Zod schemas** for form validation to ensure type safety
2. **Handle submission errors** gracefully in your submit handlers
3. **Provide clear error messages** to users
4. **Use appropriate validation modes** based on your form's complexity
5. **Reset forms** after successful submissions when appropriate

## Integration with Existing Components

The form builder works seamlessly with existing StackForge components:

```tsx
'use client';

import { z } from 'zod';
import { formBuilder } from '@/lib/form-builder';
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from '@/components/ui/form';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

const schema = z.object({
  username: z.string().min(2, 'Username must be at least 2 characters'),
  email: z.string().email('Invalid email address'),
});

type FormValues = z.infer<typeof schema>;

const IntegratedForm = () => {
  const { handleSubmitWithValidation } = formBuilder<FormValues>({
    schema,
    defaultValues: {
      username: '',
      email: '',
    }
  });
  
  const onSubmit = handleSubmitWithValidation((data) => {
    console.log(data);
  });
  
  return (
    <Form {...formMethods}>
      <form onSubmit={onSubmit} className="space-y-8">
        <FormField
          control={formMethods.control}
          name="username"
          render={({ field }) => (
            <FormItem>
              <FormLabel>Username</FormLabel>
              <FormControl>
                <Input placeholder="Enter your username" {...field} />
              </FormControl>
              <FormDescription>
                This is your public display name.
              </FormDescription>
              <FormMessage />
            </FormItem>
          )}
        />
        
        <FormField
          control={formMethods.control}
          name="email"
          render={({ field }) => (
            <FormItem>
              <FormLabel>Email</FormLabel>
              <FormControl>
                <Input placeholder="Enter your email" {...field} />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        
        <Button type="submit">Submit</Button>
      </form>
    </Form>
  );
};
```

This utility simplifies form creation while maintaining the flexibility and power of `react-hook-form` and `zod`.